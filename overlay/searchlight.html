<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>NSH/searchlight</title>
    <link rel="stylesheet" type="text/css" href="searchlight.css">
    <link rel="icon" type="image/png" href="../favicons/red.png">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="searchlight-homepage.js"></script>
  </head>
  <body>
    <a id="dragme" alt="bookmarklet" href="javascript:(function(){document.head.appendChild(document.createElement('script')).text='(function() {
      var version = '1.10.2';
      if (window.jQuery === undefined ||
          window.jQuery.fn.jquery < version) {
        var done = !1;
        var script = document.createElement('script');
        script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/'
        script.src += version + '/jquery.min.js';
        script.onload = script.onreadystatechange = function() {
          if (!done &&
             (!this.readyState ||
               this.readyState == 'loaded' ||
               this.readyState == 'complete')) {
            done = !0;
            initBookmarklet(window.jQuery)
          } else {
            console.log('Error loading jQuery.')
          }
        };
        document.getElementsByTagName('head')[0].appendChild(script);
        if (window.jQuery === undefined ||
            window.jQuery.fn.jquery < version) {
          console.log(':::')
        } else {
        console.log('jquery loaded')
        }
      } else {
        initBookmarklet(window.jQuery)
      }

      function initBookmarklet($) {
        (window.bookmarklet = function() {
          console.log('Searchlight is setting up...');

          // Darken everything on the page.
          $('*').css({
            'color':'black',
            'background':'black',
            'background-color':'black',
            'filter':'brightness(0.0)',
            'text-shadow':'none',
            'border':'none',
            'cursor':'none'
          });

          // For common text tags, keep backgrounds
          // transparent as they may overlap with
          // other elements.
          var textTags = 'h1, h2, h3, h4, h5, h6' +
                         'p, pre, span, a, img';

          $(textTags).css({
            'background-color': 'transparent',
            '-webkit-text-stroke': 'none',
          });

          console.log('Stage set...');

          // Only add the spotlight to the page if
          // it is not already there. Reapply style
          // in either case.
          if (!$('#spot').length) {
            $('body').append('<div id=\'spot\'></div>');
            console.log('Ready!');
          };

          $('#spot').css({
            'position':'fixed',
            'top':'0px',
            'left':'0px',
            'width':'260px',
            'height':'260px',
            'background-color':'white',
            'filter':'blur(30px)',
            'border-radius':'50%',
            'z-index':'1000000',
            'pointer-events':'none'
          });

          // Listen for mouse movement, adjusting
          // spotlight's coordinates to follow it.
          onmousemove = function(e) {
            $('#spot').css({
              'left': String(e.clientX - 130) + 'px',
              'top': String(e.clientY - 130) + 'px'
            });
          };

          // Brighten any element on mouseover.
          $('*:not(#spot)').mouseover(function() {
            $(this).css({
              'transition':'all 0.1s',
              'filter':'brightness(1)',
              // 'text-shadow':'0 0 12px white,0 0 2px white',
              'color':'white'
            })
          });

          // 5 seconds after mouseleave, darken
          // element again.
          $('*:not(#spot)').mouseleave(function() {
            var tag = $(this);
            setTimeout(function() {
              tag.css({
                'transition':'all 4s',
                'filter':'brightness(0)',
                'text-shadow':'none',
                'color':'black'
              });
            }, 2000);
          });
        })()
      }
    })()
';})();">
      <div id="dragme-background"></div>
      <span id="dragme-text">searchlight</span>
    </a>
    <div id="bottom-links">
      <span id="drag-description">Drag the light above into your bookmarks bar.</span>
      <br />
      <span>Then, on any webpage, click on it. Try it </span>
      <a href="https://www.are.na/" class="smallLink">here</a><span>,</span>
      <a href="http://payinterns.nyc" class="smallLink">here</a>
      <br />
      <span> or</span>
      <a href="https://www.google.com/doodles" class="smallLink">here</a><span>,</span>
      <span>or see the project's </span>
      <a href="https://github.com/schultzhenry/summer2018-yale-interactive/blob/master/overlay/searchlight.js" class="smallLink">code</a><span> & </span>
      <a href="collection.html" class="smallLink">collection</a><span>.</span>
      <br />
      <br />
      <a href="https://schultzhenry.github.io/summer2018-yale-interactive/index.html" class="smallLink" id="noLine">&#x2302;</a>
    </div>
  </body>
</html>
